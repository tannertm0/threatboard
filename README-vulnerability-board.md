# Vulnerability Board

The Vulnerability Board is a feature that displays the latest CVEs (Common Vulnerabilities and Exposures) from the CIRCL database, stored in your Supabase PostgreSQL database.

## Features

- Displays the 30 latest CVEs in a clean, responsive table
- Shows CVE ID, description, published date, updated date, and CVSS score
- Color-coded CVSS scores for severity levels
- Copy CVE IDs with a single click
- Links to detailed information on NVD and CIRCL databases
- Manual refresh button to fetch the latest vulnerabilities

## About CVE-Search

This board uses the CIRCL CVE-Search API to retrieve vulnerability data. While the original [cve-search](https://github.com/adulau/cve-search) project uses MongoDB for data storage, this implementation stores the CVE data in a PostgreSQL database via Supabase.

## Setup

### 1. Create a Supabase Project

1. Go to [Supabase](https://supabase.com/) and create a new project
2. Once your project is created, go to Project Settings > API
3. Copy your project URL and API keys

### 2. Configure Environment Variables

Create or update your `.env.local` file with the following variables:

```
# Supabase configuration
NEXT_PUBLIC_SUPABASE_URL=https://your-project-id.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=your-anon-key
SUPABASE_SERVICE_ROLE_KEY=your-service-role-key
```

Replace the placeholder values with your actual Supabase project details.

### 3. Initialize the Database

The Vulnerability Board requires a specific database schema. You can set it up using the initialization script:

```bash
npm install
npm run init-db
```

This will create the following table in your Supabase database:

```sql
CREATE TABLE IF NOT EXISTS cves (
  id uuid primary key default uuid_generate_v4(),
  cve_id text unique,
  summary text,
  cvss float,
  published_date timestamp,
  updated_date timestamp,
  reference_links jsonb,
  affected_products jsonb,
  created_at timestamp with time zone default now()
);
```

Alternatively, you can run this SQL directly in the Supabase SQL Editor.

### 4. Run the Application

Start your application:

```bash
npm run dev
```

## Usage

### Viewing Vulnerabilities

1. Access the Vulnerability Board from the Tools dropdown menu or directly at `/board`
2. The board will automatically load the latest CVEs from your database
3. If no CVEs are displayed, click the "Refresh CVEs" button to fetch them from the CIRCL API

### Refreshing Vulnerabilities

Click the "Refresh CVEs" button to fetch the latest vulnerabilities from the CIRCL API and store them in your Supabase database.

### Interacting with CVEs

- Click the copy button next to a CVE ID to copy it to your clipboard
- Click "NVD" to view detailed information on the National Vulnerability Database
- Click "CIRCL" to view information on the CIRCL database

## API Endpoint

The application includes an API endpoint that fetches CVEs from the CIRCL API and stores them in your Supabase PostgreSQL database:

```
GET /api/fetch-cves
```

This endpoint is called when you click the "Refresh CVEs" button, but you can also set up a cron job to periodically refresh the data.

## Customization

You can customize the Vulnerability Board by modifying the following files:

- `components/vulnerability-board.tsx`: The main component that displays the CVEs
- `app/api/fetch-cves/route.ts`: The API endpoint that fetches and stores CVEs
- `app/board/page.tsx`: The page that hosts the Vulnerability Board

## Troubleshooting

If you encounter issues:

1. Check that your Supabase environment variables are correctly set
2. Ensure your Supabase database has the necessary table (run the initialization script)
3. Check the browser console and server logs for error messages
4. If the CIRCL API is unresponsive, try again later as it can be occasionally slow
5. Make sure the `uuid-ossp` extension is enabled in your Supabase database 